{"version":3,"file":"StatusAutomationList-78020d69.js","sources":["../../src/components/lists/StatusAutomationList.vue"],"sourcesContent":["<template>\n<div class=\"data-list\">\n  <div class=\"datatable-wrapper\">\n    <table class=\"datatable\">\n      <thead class=\"datatable-head\">\n        <tr>\n          <th scope=\"col\" class=\"name\">\n            {{ $t('status_automations.fields.entity_type') }}\n          </th>\n          <th scope=\"col\" class=\"in-task-type\">\n            {{ $t('status_automations.fields.in_task_type') }}\n          </th>\n          <th scope=\"col\" class=\"in-task-status\">\n            {{ $t('status_automations.fields.in_task_status') }}\n          </th>\n          <th scope=\"col\" class=\"automation-type\">\n            {{ $t('status_automations.fields.out_field_type') }}\n          </th>\n          <th scope=\"col\" class=\"out-task-type\">\n            {{ $t('status_automations.fields.out_task_type') }}\n          </th>\n          <th scope=\"col\" class=\"in-task-status\">\n            {{ $t('status_automations.fields.out_task_status') }}\n          </th>\n          <th scope=\"col\" class=\"actions\">&nbsp;</th>\n        </tr>\n      </thead>\n      <tbody class=\"datatable-body\">\n        <tr\n          class=\"datatable-row\"\n          v-for=\"statusAutomation in entries\"\n          :key=\"statusAutomation.id\"\n        >\n          <td scope=\"row\" class=\"name\">\n            <div class=\"flexrow\">\n              <span\n                class=\"flexrow-item\"\n                :title=\"$t('status_automations.wrong_automation')\"\n                v-if=\"isStatusAutomationDisabled(statusAutomation)\"\n              >\n                <alert-triangle-icon/>\n              </span>\n              <span\n                class=\"flexrow-item\"\n              >\n                {{ statusAutomation.entity_type }}\n              </span>\n            </div>\n          </td>\n          <task-type-name\n            class=\"in-task-type\"\n            :task-type=\"getTaskType(statusAutomation.in_task_type_id)\"\n          />\n          <task-status-name class=\"in-task-status\"\n            :entry=\"getTaskStatus(statusAutomation.in_task_status_id)\"\n          />\n          <td class=\"input-separator\">\n            {{\n              statusAutomation.out_field_type === 'ready_for'\n              ? $t('status_automations.change_ready_for')\n              : $t('status_automations.change_status')\n            }}\n          </td>\n          <task-type-name\n            class=\"out-task-type\"\n            :task-type=\"getTaskType(statusAutomation.out_task_type_id)\"\n          />\n          <task-status-name class=\"out-task-status\"\n            v-if=\"statusAutomation.out_field_type === 'status'\"\n            :entry=\"getTaskStatus(statusAutomation.out_task_status_id)\"\n          />\n          <td\n            class=\"name out-task-status\"\n            v-else\n          >\n          </td>\n          <row-actions-cell\n            :entry-id=\"statusAutomation.id\"\n            @edit-clicked=\"$emit('edit-clicked', statusAutomation)\"\n            @delete-clicked=\"$emit('delete-clicked', statusAutomation)\"\n            v-if=\"isEditable\"\n          />\n          <td v-else>\n            <button\n              class=\"button\"\n              @click=\"removeStatusAutomation(statusAutomation.id)\"\n            >\n              {{ $t('main.remove') }}\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <table-info\n    :is-loading=\"isLoading\"\n    :is-error=\"isError\"\n  />\n\n  <p class=\"has-text-centered nb-status-automations\">\n    {{ entries.length }} {{ $tc('status_automations.number', entries.length) }}\n  </p>\n\n</div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport { formatListMixin } from '@/components/mixins/format'\n\nimport { AlertTriangleIcon } from 'vue-feather-icons'\nimport RowActionsCell from '@/components/cells/RowActionsCell'\nimport TableInfo from '@/components/widgets/TableInfo'\nimport TaskTypeName from '@/components/cells/TaskTypeName'\nimport TaskStatusName from '@/components/cells/TaskStatusName'\n\nexport default {\n  name: 'status-automation-list',\n  mixins: [formatListMixin],\n\n  components: {\n    AlertTriangleIcon,\n    RowActionsCell,\n    TableInfo,\n    TaskTypeName,\n    TaskStatusName\n  },\n\n  props: {\n    entries: {\n      type: Array,\n      default: () => []\n    },\n    isEditable: {\n      type: Boolean,\n      default: false\n    },\n    isError: {\n      type: Boolean,\n      default: false\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data () {\n    return {}\n  },\n\n  computed: {\n    ...mapGetters([\n      'getTaskStatus',\n      'getTaskType',\n      'isTaskTypePriorityHigherById',\n      'isStatusAutomationDisabled',\n      'remainingStatusAutomations'\n    ])\n  },\n  methods: {\n    ...mapActions([\n      'removeStatusAutomationFromProduction'\n    ]),\n\n    async removeStatusAutomation (statusAutomationId) {\n      await this.removeStatusAutomationFromProduction(statusAutomationId)\n      await this.$nextTick()\n      // Reselect the remainingStatusAutomations to avoid empty statusAutomationId\n      if (this.remainingStatusAutomations.length > 0) {\n        this.statusAutomationId = this.remainingStatusAutomations[0].id\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.datatable-body tr:first-child th,\n.datatable-body tr:first-child td {\n  border-top: 0;\n}\n\n.name {\n  text-transform: capitalize;\n  width: 120px;\n  min-width: 120px;\n}\n\n.in-task-type {\n  width: 150px;\n  min-width: 150px;\n}\n\n.in-task-status {\n  width: 150px;\n  min-width: 150px;\n}\n\n.separator {\n  width: 150px;\n  min-width: 150px;\n}\n\n.out-task-type {\n  width: 150px;\n  min-width: 150px;\n}\n\n.out-task-status {\n  width: 150px;\n  min-width: 150px;\n}\n\n.thead {\n  width: 100%\n}\n\n.nb-status-automations {\n  color: var(--text);\n}\n</style>\n"],"names":["_sfc_main","formatListMixin","AlertTriangleIcon","RowActionsCell","TableInfo","TaskTypeName","TaskStatusName","mapGetters","mapActions","statusAutomationId"],"mappings":"4IAqHA,MAAAA,EAAA,CACA,KAAA,yBACA,OAAA,CAAAC,CAAA,EAEA,WAAA,CACA,kBAAAC,EACA,eAAAC,EACA,UAAAC,EACA,aAAAC,EACA,eAAAC,CACA,EAEA,MAAA,CACA,QAAA,CACA,KAAA,MACA,QAAA,IAAA,CAAA,CACA,EACA,WAAA,CACA,KAAA,QACA,QAAA,EACA,EACA,QAAA,CACA,KAAA,QACA,QAAA,EACA,EACA,UAAA,CACA,KAAA,QACA,QAAA,EACA,CACA,EAEA,MAAA,CACA,MAAA,CAAA,CACA,EAEA,SAAA,CACA,GAAAC,EAAA,CACA,gBACA,cACA,+BACA,6BACA,4BACA,CAAA,CACA,EACA,QAAA,CACA,GAAAC,EAAA,CACA,sCACA,CAAA,EAEA,MAAA,uBAAAC,EAAA,CACA,MAAA,KAAA,qCAAAA,CAAA,EACA,MAAA,KAAA,UAAA,EAEA,KAAA,2BAAA,OAAA,IACA,KAAA,mBAAA,KAAA,2BAAA,CAAA,EAAA,GAEA,CACA,CACA"}