import{c as a,i as n,M as d,d as r,aa as l,m,b as c,n as f}from"./index-d0b155bb.js";const u={name:"edit-episode-modal",mixins:[a],components:{ComboboxStyled:n,ModalFooter:d,TextField:r,TextareaField:l},props:{active:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},episodeToEdit:{type:Object,default:()=>{}}},data(){let o={id:"",name:"",description:"",fps:"",data:{}};return this.episodeToEdit&&this.episodeToEdit.id&&(o={id:this.episodeToEdit.id,name:this.episodeToEdit.name,description:this.episodeToEdit.description,production_id:this.episodeToEdit.project_id,data:this.episodeToEdit.data||{}}),{form:o,episodeSuccessText:"",episodeStatusOptions:[{label:"canceled",value:"canceled"},{label:"complete",value:"complete"},{label:"running",value:"running"},{label:"standby",value:"standby"}]}},computed:{...m(["currentProduction","episodeMetadataDescriptors"])},methods:{...c([]),getDescriptorChoicesOptions(o){const e=o.choices.map(i=>({label:i,value:i}));return[{label:"",value:""},...e]},runConfirmation(){this.$emit("confirm",this.form)},isEditing(){return this.episodeToEdit&&this.episodeToEdit.id},resetForm(){this.episodeSuccessText="",this.isEditing()?this.form={id:this.episodeToEdit.id,name:this.episodeToEdit.name,status:this.episodeToEdit.status,description:this.episodeToEdit.description,data:this.episodeToEdit.data||{}}:(this.form.id=null,this.form.name="",this.form.status="running",this.form.description="",this.form.data={})}},mounted(){this.resetForm()},watch:{active(){this.active&&this.resetForm()},episodeToEdit(){this.resetForm()}}};var p=function(){var e=this,i=e._self._c;return i("div",{class:{modal:!0,"is-active":e.active}},[i("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),i("div",{staticClass:"modal-content"},[i("div",{staticClass:"box"},[e.episodeToEdit&&this.episodeToEdit.id?i("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("episodes.edit_title"))+" "+e._s(e.episodeToEdit.name)+" ")]):i("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("episodes.new_episode"))+" ")]),i("form",{on:{submit:function(t){t.preventDefault()}}},[i("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("episodes.fields.name")},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),i("combobox-styled",{staticClass:"field",attrs:{label:e.$t("main.status"),options:e.episodeStatusOptions},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}}),i("textarea-field",{ref:"descriptionField",attrs:{label:e.$t("episodes.fields.description")},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||!t.ctrlKey?null:e.runConfirmation.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||!t.metaKey?null:e.runConfirmation.apply(null,arguments)}]},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),e._l(e.episodeMetadataDescriptors,function(t){return i("div",{key:t.id},[t.choices.length>0?i("combobox-styled",{attrs:{label:t.name,options:e.getDescriptorChoicesOptions(t)},model:{value:e.form.data[t.field_name],callback:function(s){e.$set(e.form.data,t.field_name,s)},expression:"form.data[descriptor.field_name]"}}):i("text-field",{attrs:{label:t.name},on:{enter:e.runConfirmation},model:{value:e.form.data[t.field_name],callback:function(s){e.$set(e.form.data,t.field_name,s)},expression:"form.data[descriptor.field_name]"}})],1)})],2),i("modal-footer",{attrs:{"error-text":e.$t("episodes.edit_error"),"is-loading":e.isLoading,"is-error":e.isError},on:{confirm:e.runConfirmation,cancel:function(t){return e.$emit("cancel")}}})],1)])])},_=[],h=f(u,p,_,!1,null,"ef24df52",null,null);const E=h.exports;export{E};
//# sourceMappingURL=EditEpisodeModal-f758b043.js.map
